@using Microsoft.AspNet.Identity
@model List<BugTracker.Models.ProjectClasses.TicketComment>

@{
    ViewBag.Title = "Index";
    //     ViewBag.TicketId = ticketId;
    var ticketId = ViewBag.ticketId;
}

<h2 class=@ViewBag.classView>Comment</h2>

<br />

<p class="btn btn-info btn-lg">
    @Html.ActionLink("New Comment", "CreateTicketComment", "TicketComment", new { ticketId = ticketId }, null)
</p>

<br />
<br />

<table class="table">
    <tr>
        <th>
            Comment
        </th>
        <th>
            Comment By
        </th>
        <th>
            Ticket Name
        </th>
        @*  <th></th>*@
    </tr>

    @foreach (var item in Model)
    {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.Comment)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.User.UserName)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Ticket.Title)
            </td>


            <td>
                @if (this.User.Identity.GetUserId() == item.UserId)
                {
                    <span>@Html.ActionLink("Update", "UpdateTicketComment", "TicketComment", new { ticketCommentId = item.Id }, null) |</span>
                    <span>@Html.ActionLink("Delete", "DeleteTicketComment", "TicketComment", new { ticketCommentId = item.Id }, null)</span>
                }
            </td>
        </tr>
    }

</table>

<br />
<br />

<div>
    <span class="btn btn-default btnShadow">@Html.ActionLink("Back", "Index", "Ticket")</span>
</div>

<br />